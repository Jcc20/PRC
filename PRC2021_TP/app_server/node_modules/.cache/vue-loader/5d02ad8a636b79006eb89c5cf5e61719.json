{"remainingRequest":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\src\\components\\Publicações.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\src\\components\\Publicações.vue","mtime":1624906588377},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbicNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICdwdWJsaWNhY29lcycsDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsgDQogICAgICAgICAgICB0aXR1bG9SOiAnJywNCiAgICAgICAgICAgIHRpdHVsb1A6ICcnLA0KICAgICAgICAgICAgbGlzdDogW10sDQogICAgICAgICAgICBwdWJzOiBbXSwNCiAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JyksDQogICAgICAgICAgICBpZFVzZXI6ICcnLA0KICAgICAgICAgICAgYWxsOiBmYWxzZQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCkgeyAgDQogICAgICAgIGlmICh0aGlzLnRva2VuKSB7IA0KICAgICAgICAgICAgdGhpcy5pZFVzZXIgPSBqd3QuZGVjb2RlKHRoaXMudG9rZW4pLmVtYWlsDQogICAgICAgIH0gICANCiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnJlY2VpdGEpIHsNCiAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NzcwMC9wdWJsaWNhY2FvL3JlY2VpdGEvIit0aGlzLiRyb3V0ZS5xdWVyeS5yZWNlaXRhKQ0KICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgIHRoaXMucHVicyA9IHRoaXMuc29ydGVkKGRhdGEuZGF0YS5wdWJsaXMpDQogICAgICAgICAgICAgICAgICB0aGlzLmFsbCA9IHRydWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgICAgICAgIH0pICAgDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0Ojc3MDAvcHVibGljYWNhby9yZWNlbnRlcyIpDQogICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgICAgICAgICAgdGhpcy5wdWJzID0gZGF0YS5kYXRhLnB1Ymxpcw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgfSkgICANCiAgICAgICAgfSAgDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGhhbmRsZUNsaWNrKHZhbHVlKSB7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godmFsdWUpICAgICAgDQogICAgICAgIH0sDQogICAgICAgIHNvcnRlZChsaXN0YSkgew0KICAgICAgICAgICAgaWYgKGxpc3RhKSByZXR1cm4gbGlzdGEuc29ydCgoYSxiKSA9PiAoYS5kYXRhIDwgYi5kYXRhKSA/IDEgOiAoKGIuZGF0YSA8IGEuZGF0YSkgPyAtMSA6IDApKQ0KICAgICAgICAgICAgZWxzZSByZXR1cm4gbGlzdGENCiAgICAgICAgfSwNCiAgICAgICAgc2VhcmNoKCkgew0KICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gJycNCiAgICAgICAgICAgIGlmICh0aGlzLnRpdHVsb1ApIHF1ZXJ5Kz0gKHF1ZXJ5PT0nJz8nJzonJicpICsgInRpdHVsb1A9IiArIHRoaXMudGl0dWxvUA0KICAgICAgICAgICAgaWYgKHRoaXMudGl0dWxvUikgcXVlcnkrPSAocXVlcnk9PScnPycnOicmJykgKyAidGl0dWxvUj0iICsgdGhpcy50aXR1bG9SDQogICAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NzcwMC9wdWJsaWNhY2FvPyIrcXVlcnkpDQogICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHVicyA9IHRoaXMuc29ydGVkKGRhdGEuZGF0YS5wdWJsaXMpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICByZW1vdmVQdWIoaWQpIHsNCiAgICAgICAgICBpZiAoY29uZmlybSgiRGVzZWphIG1lc21vIHJlbW92ZXIgYSBwdWJsaWNhw6fDo28/IikpIHsNCiAgICAgICAgICAgIHZhciBqc29uPXt9DQogICAgICAgICAgICBqc29uWydpZFB1YiddPSBpZA0KICAgICAgICAgICAganNvblsnaWRVc2VyJ109IHRoaXMuaWRVc2VyDQogICAgICAgICAgICBheGlvcyh7DQogICAgICAgICAgICAgICAgbWV0aG9kOiAicG9zdCIsDQogICAgICAgICAgICAgICAgdXJsOiAiaHR0cDovL2xvY2FsaG9zdDo3NzAwL3B1YmxpY2FjYW8vcmVtb3ZlciIsDQogICAgICAgICAgICAgICAgZGF0YToganNvbiwNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7ICJBdXRob3JpemF0aW9uIiA6IHRoaXMudG9rZW59LA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgICBhbGVydCgnTsOjbyBmb2kgcG9zc8OtdmVsIHJlbW92ZXIgYSBwdWJsaWNhw6fDo28nKQ0KICAgICAgICAgICAgfSkNCg0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2VhcmNoQWxsKCl7DQogICAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NzcwMC9wdWJsaWNhY2FvLyIpDQogICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHVicyA9IHRoaXMuc29ydGVkKGRhdGEuZGF0YS5wdWJsaXMpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfQ0KfQ0KDQo="},{"version":3,"sources":["Publicações.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Publicações.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"publicacoes\" class=\"publicacoes\">\r\n  \r\n    <v-container class=\"pa-0\">\r\n      <v-row  no-gutters >\r\n\r\n        <v-col class=\"d-flex pa-2\" cols=\"12\" sm=\"3\">\r\n            <v-text-field\r\n              v-model=\"tituloP\"\r\n              label=\"Titulo da Publicação\"\r\n              dense\r\n              outlined\r\n              hide-details\r\n            ></v-text-field>\r\n        </v-col>\r\n\r\n        <v-col class=\"d-flex pa-2\" cols=\"12\" sm=\"3\">\r\n            <v-text-field\r\n              v-model=\"tituloR\"\r\n              label=\"Titulo da Receita\"\r\n              dense\r\n              outlined\r\n              hide-details\r\n            ></v-text-field>\r\n        </v-col>\r\n\r\n        <v-col class=\"d-flex pa-2\" cols=\"12\" sm=\"2\">\r\n            <v-btn  @click=\"search()\"> \r\n              Procurar\r\n              <v-icon> mdi-magnify </v-icon>\r\n            </v-btn>        \r\n        </v-col>\r\n\r\n      </v-row>\r\n    </v-container>\r\n\r\n    <v-container class=\"pa-0\">\r\n        <v-col v-if=\"this.pubs.length==0\" align=\"center\">\r\n          <p style=\"font-size:20px\"><b>Sem resultados!</b></p>\r\n        </v-col>\r\n        <v-row no-gutters >\r\n          <v-col v-for=\"n in pubs\" :key=\"n.id\" cols=\"12\" sm=\"12\">\r\n              <!--<v-card class=\"pa-6 rec\" @click=\"handleClick('/publicacoes/'+n.id)\">-->\r\n            <v-card class=\"pa-6 rec\">\r\n              <v-row>\r\n                <v-col cols=\"12\" sm=\"4\" style=\"display:inline-flex\">\r\n                    <v-img v-if=\"n.imgPath\" :src=\"'http://localhost:7700/uploads/'+n.imgPath\" max-width=\"400\" height=\"300\"></v-img>\r\n                    <v-img v-else src=\"../../public/default.png\"></v-img>\r\n                </v-col>\r\n                <v-col cols=\"12\" sm=\"8\">\r\n                      <v-row class=\"pa-2\">\r\n                        <b style=\"font-size: 24px;\"> {{ n.titulo }}</b> \r\n                        <v-spacer></v-spacer>\r\n                        <v-icon v-if=\"idUser==n.autor_id\" color=\"red\" @click=\"removePub(n.pub_id)\"> mdi-close </v-icon>\r\n                      </v-row>\r\n                    <br/> \r\n                    <span  style=\"cursor:pointer\" @click=\"handleClick('/receitas/'+n.rec_id)\"> <b>Receita: </b> {{ n.titulo_receita }}  <br/> </span> <br/> \r\n                    <span>  {{ n.descricao }}  <br/> </span> <br/> \r\n                    <span> {{ n.autor }} {{ n.data | moment(\"from\") }} </span>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n    </v-container>\r\n\r\n    <v-row v-if=\"!all\">\r\n        <v-col align=\"center\">\r\n            <v-btn @click=\"searchAll()\"> Ver Todas \r\n            </v-btn>\r\n        </v-col>\r\n    </v-row>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport default {\r\n    name: 'publicacoes',\r\n    data() {\r\n        return { \r\n            tituloR: '',\r\n            tituloP: '',\r\n            list: [],\r\n            pubs: [],\r\n            token: localStorage.getItem('jwt'),\r\n            idUser: '',\r\n            all: false\r\n        }\r\n    },\r\n    created() {  \r\n        if (this.token) { \r\n            this.idUser = jwt.decode(this.token).email\r\n        }   \r\n        if (this.$route.query.receita) {\r\n          axios.get(\"http://localhost:7700/publicacao/receita/\"+this.$route.query.receita)\r\n              .then(data => {\r\n                  this.pubs = this.sorted(data.data.publis)\r\n                  this.all = true\r\n              })\r\n              .catch(err => {\r\n                  console.log(err)\r\n              })   \r\n        }\r\n        else {\r\n          axios.get(\"http://localhost:7700/publicacao/recentes\")\r\n              .then(data => {\r\n                  this.pubs = data.data.publis\r\n              })\r\n              .catch(err => {\r\n                  console.log(err)\r\n              })   \r\n        }  \r\n    },\r\n    methods: {\r\n        handleClick(value) {\r\n          this.$router.push(value)      \r\n        },\r\n        sorted(lista) {\r\n            if (lista) return lista.sort((a,b) => (a.data < b.data) ? 1 : ((b.data < a.data) ? -1 : 0))\r\n            else return lista\r\n        },\r\n        search() {\r\n            var query = ''\r\n            if (this.tituloP) query+= (query==''?'':'&') + \"tituloP=\" + this.tituloP\r\n            if (this.tituloR) query+= (query==''?'':'&') + \"tituloR=\" + this.tituloR\r\n            axios.get(\"http://localhost:7700/publicacao?\"+query)\r\n                .then(data => {\r\n                    this.pubs = this.sorted(data.data.publis)\r\n                    this.all = true\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n        },\r\n        removePub(id) {\r\n          if (confirm(\"Deseja mesmo remover a publicação?\")) {\r\n            var json={}\r\n            json['idPub']= id\r\n            json['idUser']= this.idUser\r\n            axios({\r\n                method: \"post\",\r\n                url: \"http://localhost:7700/publicacao/remover\",\r\n                data: json,\r\n                headers: { \"Authorization\" : this.token},\r\n            })\r\n            .then(() => {\r\n                this.$router.go()\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert('Não foi possível remover a publicação')\r\n            })\r\n\r\n          }\r\n        },\r\n        searchAll(){\r\n            axios.get(\"http://localhost:7700/publicacao/\")\r\n                .then(data => {\r\n                    this.pubs = this.sorted(data.data.publis)\r\n                    this.all = true\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n\r\n\r\n</style>"]}]}