{"remainingRequest":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\src\\components\\Publicações.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\src\\components\\Publicações.vue","mtime":1624906588377},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Zezoca\\Desktop\\Uni\\4ano\\2sem\\PRC\\PRC2021_TP\\app_server\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwdWJsaWNhY29lcycsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdHVsb1I6ICcnLAogICAgICB0aXR1bG9QOiAnJywKICAgICAgbGlzdDogW10sCiAgICAgIHB1YnM6IFtdLAogICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpLAogICAgICBpZFVzZXI6ICcnLAogICAgICBhbGw6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKHRoaXMudG9rZW4pIHsKICAgICAgdGhpcy5pZFVzZXIgPSBqd3QuZGVjb2RlKHRoaXMudG9rZW4pLmVtYWlsOwogICAgfQoKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5yZWNlaXRhKSB7CiAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo3NzAwL3B1YmxpY2FjYW8vcmVjZWl0YS8iICsgdGhpcy4kcm91dGUucXVlcnkucmVjZWl0YSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzLnB1YnMgPSBfdGhpcy5zb3J0ZWQoZGF0YS5kYXRhLnB1Ymxpcyk7CiAgICAgICAgX3RoaXMuYWxsID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0Ojc3MDAvcHVibGljYWNhby9yZWNlbnRlcyIpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpcy5wdWJzID0gZGF0YS5kYXRhLnB1YmxpczsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKHZhbHVlKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHZhbHVlKTsKICAgIH0sCiAgICBzb3J0ZWQ6IGZ1bmN0aW9uIHNvcnRlZChsaXN0YSkgewogICAgICBpZiAobGlzdGEpIHJldHVybiBsaXN0YS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEuZGF0YSA8IGIuZGF0YSA/IDEgOiBiLmRhdGEgPCBhLmRhdGEgPyAtMSA6IDA7CiAgICAgIH0pO2Vsc2UgcmV0dXJuIGxpc3RhOwogICAgfSwKICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBxdWVyeSA9ICcnOwogICAgICBpZiAodGhpcy50aXR1bG9QKSBxdWVyeSArPSAocXVlcnkgPT0gJycgPyAnJyA6ICcmJykgKyAidGl0dWxvUD0iICsgdGhpcy50aXR1bG9QOwogICAgICBpZiAodGhpcy50aXR1bG9SKSBxdWVyeSArPSAocXVlcnkgPT0gJycgPyAnJyA6ICcmJykgKyAidGl0dWxvUj0iICsgdGhpcy50aXR1bG9SOwogICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6NzcwMC9wdWJsaWNhY2FvPyIgKyBxdWVyeSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzMi5wdWJzID0gX3RoaXMyLnNvcnRlZChkYXRhLmRhdGEucHVibGlzKTsKICAgICAgICBfdGhpczIuYWxsID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZVB1YjogZnVuY3Rpb24gcmVtb3ZlUHViKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKGNvbmZpcm0oIkRlc2VqYSBtZXNtbyByZW1vdmVyIGEgcHVibGljYcOnw6NvPyIpKSB7CiAgICAgICAgdmFyIGpzb24gPSB7fTsKICAgICAgICBqc29uWydpZFB1YiddID0gaWQ7CiAgICAgICAganNvblsnaWRVc2VyJ10gPSB0aGlzLmlkVXNlcjsKICAgICAgICBheGlvcyh7CiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIHVybDogImh0dHA6Ly9sb2NhbGhvc3Q6NzcwMC9wdWJsaWNhY2FvL3JlbW92ZXIiLAogICAgICAgICAgZGF0YToganNvbiwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiB0aGlzLnRva2VuCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczMuJHJvdXRlci5nbygpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICBhbGVydCgnTsOjbyBmb2kgcG9zc8OtdmVsIHJlbW92ZXIgYSBwdWJsaWNhw6fDo28nKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaEFsbDogZnVuY3Rpb24gc2VhcmNoQWxsKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo3NzAwL3B1YmxpY2FjYW8vIikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIF90aGlzNC5wdWJzID0gX3RoaXM0LnNvcnRlZChkYXRhLmRhdGEucHVibGlzKTsKICAgICAgICBfdGhpczQuYWxsID0gdHJ1ZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Publicações.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div id=\"publicacoes\" class=\"publicacoes\">\r\n  \r\n    <v-container class=\"pa-0\">\r\n      <v-row  no-gutters >\r\n\r\n        <v-col class=\"d-flex pa-2\" cols=\"12\" sm=\"3\">\r\n            <v-text-field\r\n              v-model=\"tituloP\"\r\n              label=\"Titulo da Publicação\"\r\n              dense\r\n              outlined\r\n              hide-details\r\n            ></v-text-field>\r\n        </v-col>\r\n\r\n        <v-col class=\"d-flex pa-2\" cols=\"12\" sm=\"3\">\r\n            <v-text-field\r\n              v-model=\"tituloR\"\r\n              label=\"Titulo da Receita\"\r\n              dense\r\n              outlined\r\n              hide-details\r\n            ></v-text-field>\r\n        </v-col>\r\n\r\n        <v-col class=\"d-flex pa-2\" cols=\"12\" sm=\"2\">\r\n            <v-btn  @click=\"search()\"> \r\n              Procurar\r\n              <v-icon> mdi-magnify </v-icon>\r\n            </v-btn>        \r\n        </v-col>\r\n\r\n      </v-row>\r\n    </v-container>\r\n\r\n    <v-container class=\"pa-0\">\r\n        <v-col v-if=\"this.pubs.length==0\" align=\"center\">\r\n          <p style=\"font-size:20px\"><b>Sem resultados!</b></p>\r\n        </v-col>\r\n        <v-row no-gutters >\r\n          <v-col v-for=\"n in pubs\" :key=\"n.id\" cols=\"12\" sm=\"12\">\r\n              <!--<v-card class=\"pa-6 rec\" @click=\"handleClick('/publicacoes/'+n.id)\">-->\r\n            <v-card class=\"pa-6 rec\">\r\n              <v-row>\r\n                <v-col cols=\"12\" sm=\"4\" style=\"display:inline-flex\">\r\n                    <v-img v-if=\"n.imgPath\" :src=\"'http://localhost:7700/uploads/'+n.imgPath\" max-width=\"400\" height=\"300\"></v-img>\r\n                    <v-img v-else src=\"../../public/default.png\"></v-img>\r\n                </v-col>\r\n                <v-col cols=\"12\" sm=\"8\">\r\n                      <v-row class=\"pa-2\">\r\n                        <b style=\"font-size: 24px;\"> {{ n.titulo }}</b> \r\n                        <v-spacer></v-spacer>\r\n                        <v-icon v-if=\"idUser==n.autor_id\" color=\"red\" @click=\"removePub(n.pub_id)\"> mdi-close </v-icon>\r\n                      </v-row>\r\n                    <br/> \r\n                    <span  style=\"cursor:pointer\" @click=\"handleClick('/receitas/'+n.rec_id)\"> <b>Receita: </b> {{ n.titulo_receita }}  <br/> </span> <br/> \r\n                    <span>  {{ n.descricao }}  <br/> </span> <br/> \r\n                    <span> {{ n.autor }} {{ n.data | moment(\"from\") }} </span>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n    </v-container>\r\n\r\n    <v-row v-if=\"!all\">\r\n        <v-col align=\"center\">\r\n            <v-btn @click=\"searchAll()\"> Ver Todas \r\n            </v-btn>\r\n        </v-col>\r\n    </v-row>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport default {\r\n    name: 'publicacoes',\r\n    data() {\r\n        return { \r\n            tituloR: '',\r\n            tituloP: '',\r\n            list: [],\r\n            pubs: [],\r\n            token: localStorage.getItem('jwt'),\r\n            idUser: '',\r\n            all: false\r\n        }\r\n    },\r\n    created() {  \r\n        if (this.token) { \r\n            this.idUser = jwt.decode(this.token).email\r\n        }   \r\n        if (this.$route.query.receita) {\r\n          axios.get(\"http://localhost:7700/publicacao/receita/\"+this.$route.query.receita)\r\n              .then(data => {\r\n                  this.pubs = this.sorted(data.data.publis)\r\n                  this.all = true\r\n              })\r\n              .catch(err => {\r\n                  console.log(err)\r\n              })   \r\n        }\r\n        else {\r\n          axios.get(\"http://localhost:7700/publicacao/recentes\")\r\n              .then(data => {\r\n                  this.pubs = data.data.publis\r\n              })\r\n              .catch(err => {\r\n                  console.log(err)\r\n              })   \r\n        }  \r\n    },\r\n    methods: {\r\n        handleClick(value) {\r\n          this.$router.push(value)      \r\n        },\r\n        sorted(lista) {\r\n            if (lista) return lista.sort((a,b) => (a.data < b.data) ? 1 : ((b.data < a.data) ? -1 : 0))\r\n            else return lista\r\n        },\r\n        search() {\r\n            var query = ''\r\n            if (this.tituloP) query+= (query==''?'':'&') + \"tituloP=\" + this.tituloP\r\n            if (this.tituloR) query+= (query==''?'':'&') + \"tituloR=\" + this.tituloR\r\n            axios.get(\"http://localhost:7700/publicacao?\"+query)\r\n                .then(data => {\r\n                    this.pubs = this.sorted(data.data.publis)\r\n                    this.all = true\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n        },\r\n        removePub(id) {\r\n          if (confirm(\"Deseja mesmo remover a publicação?\")) {\r\n            var json={}\r\n            json['idPub']= id\r\n            json['idUser']= this.idUser\r\n            axios({\r\n                method: \"post\",\r\n                url: \"http://localhost:7700/publicacao/remover\",\r\n                data: json,\r\n                headers: { \"Authorization\" : this.token},\r\n            })\r\n            .then(() => {\r\n                this.$router.go()\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n                alert('Não foi possível remover a publicação')\r\n            })\r\n\r\n          }\r\n        },\r\n        searchAll(){\r\n            axios.get(\"http://localhost:7700/publicacao/\")\r\n                .then(data => {\r\n                    this.pubs = this.sorted(data.data.publis)\r\n                    this.all = true\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n\r\n\r\n</style>"],"sourceRoot":"src/components"}]}